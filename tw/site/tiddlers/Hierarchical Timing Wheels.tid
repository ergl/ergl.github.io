created: 20190325095042689
modified: 20190325095946016
title: Hierarchical Timing Wheels
type: text/vnd.tiddlywiki

I got intrigued about this after reading Whatsapp's contributions to Erlang. Apparently they redesigned the timing wheel inside the BEAM. Some resources:

* [[Hashed and Hierarchical Timing Wheels (1987)|http://www.cs.columbia.edu/~nahum/w6998/papers/sosp87-timing-wheels.pdf]] (original paper)
** And [[The Morning Paper take on it|https://blog.acolyer.org/2015/11/23/hashed-and-hierarchical-timing-wheels/]]
* An approach [[inside the Linux kernel|https://lwn.net/Articles/152436/]]
** And a [[follow-up article|https://lwn.net/Articles/646950/]]
* Also used to [[implement caches|http://highscalability.com/blog/2019/2/25/design-of-a-modern-cachepart-deux.html]]

Implementations:

* Sample [[implementation|https://github.com/rmind/ttimer]] in C
* [[The one used inside the BEAM|https://github.com/erlang/otp/blob/master/erts/emulator/beam/time.c]]
* [[Tips on implementing one on top of Mnesia in Erlang|http://erlang.org/pipermail/erlang-questions/2018-December/096893.html]]